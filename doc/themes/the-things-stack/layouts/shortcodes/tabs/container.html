<div class="tabs" id="tabs">
  <ul>
    <span> Show instructions for:</span>
    <li class="is-active" data-tab="console">
      <a>
        <span>Console</span>
      </a>
    </li>
    <li data-tab="cli">
      <a>
        <span>CLI</span>
      </a>
    </li>
  </ul>
</div>
<div id="tab-content">
  {{ .Inner | markdownify }}
</div>

<script>
const tabs = [...document.querySelectorAll('#tabs li')];
const tab_content = [...document.querySelectorAll('#tab-content section')];
const active_class = 'is-active';

function init() {
  if(window.localStorage.getItem('tabActive')) {
    toggleTab(window.localStorage.getItem('tabActive'))
  }

  tabs.forEach((tab) => {
    tab.addEventListener('click', handleClick)
  })
}

function handleClick(event) {
  event.preventDefault();
  let tab = event.currentTarget;
  let key = tab.getAttribute('data-tab');
  toggleTab(key)
}

function toggleTab(key) {
  let tab = getTabByKey(key)
  updateActiveTab(tab)
  updateActiveContent(key)
  if(window.localStorage){
    window.localStorage.setItem("tabActive", key)
  }
}

function getTabByKey(key) {
  return document.querySelectorAll(`[data-tab="${key}"]`)[0];
}

function updateActiveTab(tab) {
  tabs.forEach((tab) => {
    if (tab && tab.classList.contains(active_class)) {
      tab.classList.remove(active_class);
    }
  });
  tab.classList.add(active_class);
}

function updateActiveContent(key) {
  tab_content.forEach((item) => {
    if (item && item.classList.contains(active_class)) {
      item.classList.remove(active_class);
    }
    let data = item.getAttribute('data-content');
    if (data === key) {
      item.classList.add(active_class);
    }
  });
}

init();
</script>
